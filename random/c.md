### 存储分配程序
空闲存储空间以空闲块链表的方式组织，每个块包含一个长度、一个指向下一块的指针以及一个指
向自身存储空间的指针。

当有申请请求时，malloc 将扫描空闲块链表，直到找到一个足够大的块为止。该算法称为“首次适
应”（first fit）；与之相对的算法是“最佳适应”（best fit），它寻找满足条件的最小块。如果
该块恰好与请求的大小相符合，则将它从链表中移走并返回给用户。如果该块太大，则将它分成两部
分：大小合适的块返回给用户，剩下的部分留在空闲块链表中。如果找不到一个足够大的块，则向操
作系统申请一个大块并加入到空闲块链表中。

Header
```c
typedef long Align; /* 按照 long 类型的边界对齐 */

union header {
        struct {
                union header *ptr; /* 空闲块链表中的下一块 */
                unsigned size;     /* 本块的大小 */
        } s;
        Align x;                   /* 强制块的对齐 */
}

typedef union header Header;
```
